<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Wild Slots</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #0a2e3d;
            color: white;
            margin: 0;
            padding: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            box-sizing: border-box;
        }
        
        h1 {
            font-size: 24px;
            margin: 10px 0;
            text-align: center;
        }
        
        .game-container {
            display: flex;
            flex-direction: column;
            width: 100%;
            max-width: 900px;
            gap: 15px;
        }
        
        .slot-area {
            order: 1;
            width: 100%;
        }
        
        .paytable {
            order: 2;
            background-color: #1a4b5e;
            border-radius: 10px;
            padding: 15px;
            width: 100%;
            box-sizing: border-box;
        }
        
        .slot-machine {
            display: flex;
            justify-content: center;
            margin-bottom: 15px;
            gap: 5px;
        }
        
        .reel {
            width: 18vw;
            height: 24vw;
            max-width: 80px;
            max-height: 120px;
            border: 3px solid #2d7d9a;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
            background-color: #123946;
        }
        
        .reel:nth-child(5) {
            border-color: #ff0000;
            box-shadow: 0 0 10px #ff0000;
        }
        
        .symbol {
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 6vw;
            position: absolute;
            will-change: transform;
        }
        
        @media (min-width: 600px) {
            .game-container {
                flex-direction: row;
                align-items: flex-start;
            }
            
            .slot-area {
                width: auto;
                flex-grow: 1;
            }
            
            .paytable {
                width: 250px;
                flex-shrink: 0;
            }
            
            .symbol {
                font-size: 40px;
            }
            
            h1 {
                font-size: 28px;
                margin: 20px 0;
            }
        }
        
        .symbol.falling {
            animation: fall 0.8s cubic-bezier(0.4, 0, 0.6, 1) forwards;
            transform: translateY(-200px);
            opacity: 0;
        }
        
        @keyframes fall {
            0% {
                transform: translateY(-200px);
                opacity: 0;
            }
            80% {
                opacity: 1;
            }
            100% {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        .paytable h3 {
            text-align: center;
            margin-top: 0;
            color: gold;
        }
        
        .paytable table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
        }
        
        .paytable th, .paytable td {
            padding: 6px;
            text-align: center;
            border-bottom: 1px solid #2d7d9a;
        }
        
        .paytable th {
            color: gold;
        }
        
        .paytable tr:last-child td {
            border-bottom: none;
        }
        
        .controls {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 5px;
            margin-bottom: 15px;
        }
        
        button {
            background-color: #2d7d9a;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            min-width: 60px;
            flex-grow: 1;
        }
        
        @media (min-width: 600px) {
            button {
                padding: 10px 15px;
                font-size: 16px;
                flex-grow: 0;
            }
        }
        
        button:disabled {
            background-color: #555;
            cursor: not-allowed;
        }
        
        .info-panel {
            display: flex;
            justify-content: space-between;
            background-color: #123946;
            padding: 10px;
            border-radius: 10px;
            margin-bottom: 15px;
        }
        
        .info-item {
            text-align: center;
            flex: 1;
        }
        
        .info-label {
            font-size: 12px;
            color: #7fb8d1;
            margin-bottom: 3px;
        }
        
        .info-value {
            font-size: 16px;
            font-weight: bold;
        }
        
        @media (min-width: 600px) {
            .info-label {
                font-size: 14px;
            }
            
            .info-value {
                font-size: 18px;
            }
        }
        
        .wild {
            color: gold;
            text-shadow: 0 0 5px rgba(255, 215, 0, 0.7);
        }
        
        .fs {
            color: gold;
            text-shadow: 0 0 5px rgba(255, 215, 0, 0.7);
            font-weight: bold;
            font-size: 20px;
        }
        
        @media (min-width: 600px) {
            .fs {
                font-size: 30px;
            }
        }
        
        .win-line {
            background-color: rgba(255, 215, 0, 0.3);
            box-shadow: 0 0 15px gold;
            animation: pulse 0.5s infinite alternate;
        }
        
        @keyframes pulse {
            from { opacity: 1; }
            to { opacity: 0.7; }
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 100;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: #1a4b5e;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            max-width: 90%;
            width: 400px;
            box-sizing: border-box;
        }
        
        .modal-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }
        
        .modal-buttons button {
            padding: 8px 20px;
        }
        
        .bonus-win-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 100;
            justify-content: center;
            align-items: center;
        }
        
        .bonus-win-content {
            background-color: #1a4b5e;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            max-width: 90%;
            width: 400px;
            border: 3px solid gold;
            box-sizing: border-box;
        }
        
        .bonus-win-content h2 {
            color: gold;
            margin-top: 0;
            font-size: 20px;
        }
        
        @media (min-width: 600px) {
            .bonus-win-content h2 {
                font-size: 24px;
            }
        }
    </style>
</head>
<body>
    <h1>Wild Slots</h1>
    <div class="game-container">
        <div class="slot-area">
            <div class="slot-machine">
                <div class="reel" id="reel1">
                    <div class="symbol">üçí</div>
                    <div class="symbol">üçã</div>
                    <div class="symbol">üçä</div>
                </div>
                <div class="reel" id="reel2">
                    <div class="symbol">üçí</div>
                    <div class="symbol">üçã</div>
                    <div class="symbol">üçä</div>
                </div>
                <div class="reel" id="reel3">
                    <div class="symbol">üçí</div>
                    <div class="symbol">üçã</div>
                    <div class="symbol">üçä</div>
                </div>
                <div class="reel" id="reel4">
                    <div class="symbol">üçí</div>
                    <div class="symbol">üçã</div>
                    <div class="symbol">üçä</div>
                </div>
                <div class="reel" id="reel5">
                    <div class="symbol">üçí</div>
                    <div class="symbol">üçã</div>
                    <div class="symbol">üçä</div>
                </div>
            </div>
            
            <div class="info-panel">
                <div class="info-item">
                    <div class="info-label">–ö–†–ï–î–ò–¢</div>
                    <div class="info-value" id="credit">100</div>
                </div>
                <div class="info-item">
                    <div class="info-label">–°–¢–ê–í–ö–ê</div>
                    <div class="info-value" id="bet">1</div>
                </div>
                <div class="info-item">
                    <div class="info-label">–í–´–ò–ì–†–´–®</div>
                    <div class="info-value" id="win">0</div>
                </div>
            </div>
            
            <div class="controls">
                <button id="bonusRound">–ë–û–ù–£–°</button>
                <button id="betDown">-</button>
                <button id="betUp">+</button>
                <button id="maxBet">MAX</button>
                <button id="spinBtn">SPIN</button>               
            </div>
        </div>

        <div class="paytable">
            <h3>–¢–∞–±–ª–∏—Ü–∞ –≤—ã–ø–ª–∞—Ç</h3>
            <table id="paytable">
                <tr>
                    <th>–°–∏–º–≤–æ–ª</th>
                    <th>3</th>
                    <th>4</th>
                    <th>5</th>
                </tr>
                <tr>
                    <td>üçí</td>
                    <td class="cherry-3">2</td>
                    <td class="cherry-4">5</td>
                    <td class="cherry-5">10</td>
                </tr>
                <tr>
                    <td>üçã</td>
                    <td class="lemon-3">4</td>
                    <td class="lemon-4">10</td>
                    <td class="lemon-5">20</td>
                </tr>
                <tr>
                    <td>üçä</td>
                    <td class="orange-3">6</td>
                    <td class="orange-4">15</td>
                    <td class="orange-5">30</td>
                </tr>
                <tr>
                    <td>üçâ</td>
                    <td class="watermelon-3">10</td>
                    <td class="watermelon-4">25</td>
                    <td class="watermelon-5">50</td>
                </tr>
                <tr>
                    <td>üçá</td>
                    <td class="grapes-3">16</td>
                    <td class="grapes-4">40</td>
                    <td class="grapes-5">80</td>
                </tr>
                <tr>
                    <td>üîî</td>
                    <td class="bell-3">20</td>
                    <td class="bell-4">50</td>
                    <td class="bell-5">100</td>
                </tr>
                <tr>
                    <td>üíé</td>
                    <td class="diamond-3">30</td>
                    <td class="diamond-4">75</td>
                    <td class="diamond-5">150</td>
                </tr>
                <tr>
                    <td>‚≠ê</td>
                    <td class="star-3">40</td>
                    <td class="star-4">100</td>
                    <td class="star-5">200</td>
                </tr>
                <tr>
                    <td class="wild">WILD</td>
                    <td>-</td>
                    <td>-</td>
                    <td>-</td>
                </tr>
                <tr>
                    <td class="fs">FS</td>
                    <td colspan="3">–ë–æ–Ω—É—Å–Ω—ã–π —Ä–∞—É–Ω–¥
                </tr>
            </table>
            <p style="text-align: center; margin-top: 15px; font-size: 12px; color: #7fb8d1;">
                WILD –∑–∞–º–µ–Ω—è–µ—Ç –ª—é–±—ã–µ —Å–∏–º–≤–æ–ª—ã<br>
                FS –Ω–∞ 5-–º –±–∞—Ä–∞–±–∞–Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç –±–æ–Ω—É—Å–Ω—ã–π —Ä–∞—É–Ω–¥
            </p>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –±–æ–Ω—É—Å–Ω–æ–≥–æ —Ä–∞—É–Ω–¥–∞ -->
    <div class="modal" id="bonusModal">
        <div class="modal-content">
            <h3 id="bonusModalText">–í—ã —Ç–æ—á–Ω–æ —Ö–æ—Ç–∏—Ç–µ –∫—É–ø–∏—Ç—å –±–æ–Ω—É—Å–Ω—ã–π —Ä–∞—É–Ω–¥ –∑–∞ N?</h3>
            <div class="modal-buttons">
                <button id="cancelBonus">–û—Ç–º–µ–Ω–∞</button>
                <button id="confirmBonus">–î–∞</button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–∏ –≤—ã–ø–∞–¥–µ–Ω–∏–∏ FS –Ω–∞ 5-–º –±–∞—Ä–∞–±–∞–Ω–µ -->
    <div class="bonus-win-modal" id="fsModal">
        <div class="bonus-win-content">
            <h2>–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!</h2>
            <p>FS –Ω–∞ 5-–º –±–∞—Ä–∞–±–∞–Ω–µ! –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ –±–æ–Ω—É—Å–Ω—ã–π —Ä–∞—É–Ω–¥!</p>
            <button id="continueBonus">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
        </div>
    </div>

    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–≥—Ä—ã
        const config = {
            // –ú–∞—Å—Å–∏–≤ —Å–∏–º–≤–æ–ª–æ–≤ —Å –∏—Ö –≤–µ—Å–∞–º–∏ (–≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—è–º–∏ –≤—ã–ø–∞–¥–µ–Ω–∏—è)
            symbols: [
                { symbol: 'üçí', weight: 100 },
                { symbol: 'üçã', weight: 90 },
                { symbol: 'üçä', weight: 80 },
                { symbol: 'üçâ', weight: 70 },
                { symbol: 'üçá', weight: 60 },
                { symbol: 'üîî', weight: 40 },
                { symbol: 'üíé', weight: 30 },
                { symbol: '‚≠ê', weight: 20 },
                { symbol: 'WILD', weight: 30 },
                { symbol: 'FS', weight: 10 }
            ],
            basePaytable: {
                'üçí': [2, 5, 10],
                'üçã': [4, 10, 20],
                'üçä': [6, 15, 30],
                'üçâ': [10, 25, 50],
                'üçá': [16, 40, 80],
                'üîî': [20, 50, 100],
                'üíé': [30, 75, 150],
                '‚≠ê': [40, 100, 200],
                'WILD': [0, 0, 0],
                'FS': [0, 0, 0]
            },
            reelCount: 5,
            symbolCount: 3,
            reelDelay: 200,
            fallDuration: 800,
            bonusPrices: {
                1: 40,
                2: 100,
                3: 150,
                4: 200,
                5: 250,
                6: 300,
                7: 350,
                8: 400,
                9: 450,
                10: 500
            }
        };

        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
        const state = {
            credit: 100,
            bet: 1,
            minBet: 1,
            maxBet: 10,
            win: 0,
            isSpinning: false,
            winningLines: [],
            bonusTriggered: false
        };

        // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
        const elements = {
            reels: Array.from(document.querySelectorAll('.reel')),
            credit: document.getElementById('credit'),
            bet: document.getElementById('bet'),
            win: document.getElementById('win'),
            spinBtn: document.getElementById('spinBtn'),
            betUp: document.getElementById('betUp'),
            betDown: document.getElementById('betDown'),
            maxBet: document.getElementById('maxBet'),
            bonusRound: document.getElementById('bonusRound'),
            paytable: document.getElementById('paytable'),
            bonusModal: document.getElementById('bonusModal'),
            bonusModalText: document.getElementById('bonusModalText'),
            cancelBonus: document.getElementById('cancelBonus'),
            confirmBonus: document.getElementById('confirmBonus'),
            fsModal: document.getElementById('fsModal'),
            continueBonus: document.getElementById('continueBonus')
        };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        function init() {
            updateUI();
            setupEventListeners();
            initReels();
            updatePaytable();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        function updateUI() {
            elements.credit.textContent = state.credit;
            elements.bet.textContent = state.bet;
            elements.win.textContent = state.win;
            
            elements.betUp.disabled = state.isSpinning || state.bet >= state.maxBet;
            elements.betDown.disabled = state.isSpinning || state.bet <= state.minBet;
            elements.maxBet.disabled = state.isSpinning;
            elements.spinBtn.disabled = state.isSpinning || state.credit < state.bet;
            elements.bonusRound.disabled = state.isSpinning || state.credit < config.bonusPrices[state.bet];
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –≤—ã–ø–ª–∞—Ç
        function updatePaytable() {
            const bet = state.bet;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –≤ —Ç–∞–±–ª–∏—Ü–µ –≤—ã–ø–ª–∞—Ç
            for (const symbol in config.basePaytable) {
                if (symbol === 'FS') continue;
                
                const values = config.basePaytable[symbol];
                const multiplier = bet;
                
                // –î–ª—è —Å—Ç–∞–≤–∫–∏ 1 —É–º–µ–Ω—å—à–∞–µ–º –≤—ã–ø–ª–∞—Ç—ã –Ω–∞ 1/5
                if (bet === 1) {
                    document.querySelector(`.${symbol.toLowerCase().replace('üçí', 'cherry').replace('üçã', 'lemon').replace('üçä', 'orange').replace('üçâ', 'watermelon').replace('üçá', 'grapes').replace('üîî', 'bell').replace('üíé', 'diamond').replace('‚≠ê', 'star')}-3`).textContent = Math.floor(values[0] * multiplier * 0.8);
                    document.querySelector(`.${symbol.toLowerCase().replace('üçí', 'cherry').replace('üçã', 'lemon').replace('üçä', 'orange').replace('üçâ', 'watermelon').replace('üçá', 'grapes').replace('üîî', 'bell').replace('üíé', 'diamond').replace('‚≠ê', 'star')}-4`).textContent = Math.floor(values[1] * multiplier * 0.8);
                    document.querySelector(`.${symbol.toLowerCase().replace('üçí', 'cherry').replace('üçã', 'lemon').replace('üçä', 'orange').replace('üçâ', 'watermelon').replace('üçá', 'grapes').replace('üîî', 'bell').replace('üíé', 'diamond').replace('‚≠ê', 'star')}-5`).textContent = Math.floor(values[2] * multiplier * 0.8);
                } else {
                    document.querySelector(`.${symbol.toLowerCase().replace('üçí', 'cherry').replace('üçã', 'lemon').replace('üçä', 'orange').replace('üçâ', 'watermelon').replace('üçá', 'grapes').replace('üîî', 'bell').replace('üíé', 'diamond').replace('‚≠ê', 'star')}-3`).textContent = values[0] * multiplier;
                    document.querySelector(`.${symbol.toLowerCase().replace('üçí', 'cherry').replace('üçã', 'lemon').replace('üçä', 'orange').replace('üçâ', 'watermelon').replace('üçá', 'grapes').replace('üîî', 'bell').replace('üíé', 'diamond').replace('‚≠ê', 'star')}-4`).textContent = values[1] * multiplier;
                    document.querySelector(`.${symbol.toLowerCase().replace('üçí', 'cherry').replace('üçã', 'lemon').replace('üçä', 'orange').replace('üçâ', 'watermelon').replace('üçá', 'grapes').replace('üîî', 'bell').replace('üíé', 'diamond').replace('‚≠ê', 'star')}-5`).textContent = values[2] * multiplier;
                }
            }
        }

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–æ–±—ã—Ç–∏–π
        function setupEventListeners() {
            elements.spinBtn.addEventListener('click', startSpin);
            elements.betUp.addEventListener('click', () => changeBet(1));
            elements.betDown.addEventListener('click', () => changeBet(-1));
            elements.maxBet.addEventListener('click', () => {
                state.bet = state.maxBet;
                updateUI();
                updatePaytable();
            });
            elements.bonusRound.addEventListener('click', showBonusModal);
            elements.cancelBonus.addEventListener('click', hideBonusModal);
            elements.confirmBonus.addEventListener('click', startBonusRound);
            elements.continueBonus.addEventListener('click', startBonusRoundFromFS);
        }

        // –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞–≤–∫–∏
        function changeBet(amount) {
            const newBet = state.bet + amount;
            if (newBet >= state.minBet && newBet <= state.maxBet) {
                state.bet = newBet;
                updateUI();
                updatePaytable();
            }
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –±–æ–Ω—É—Å–Ω–æ–≥–æ —Ä–∞—É–Ω–¥–∞
        function showBonusModal() {
            const price = config.bonusPrices[state.bet];
            elements.bonusModalText.textContent = `–í—ã —Ç–æ—á–Ω–æ —Ö–æ—Ç–∏—Ç–µ –∫—É–ø–∏—Ç—å –±–æ–Ω—É—Å–Ω—ã–π —Ä–∞—É–Ω–¥ –∑–∞ ${price}?`;
            elements.bonusModal.style.display = 'flex';
        }

        // –°–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –±–æ–Ω—É—Å–Ω–æ–≥–æ —Ä–∞—É–Ω–¥–∞
        function hideBonusModal() {
            elements.bonusModal.style.display = 'none';
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–±–æ—Ä–∞ —Å–ª—É—á–∞–π–Ω–æ–≥–æ —Å–∏–º–≤–æ–ª–∞ —Å —É—á–µ—Ç–æ–º –≤–µ—Å–æ–≤
        function getRandomSymbol(isFifthReel = false) {
            // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –æ–±—â–∏–π –≤–µ—Å
            let totalWeight = config.symbols.reduce((sum, sym) => sum + sym.weight, 0);
            
            // –ï—Å–ª–∏ —ç—Ç–æ 5-–π –±–∞—Ä–∞–±–∞–Ω, —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º —à–∞–Ω—Å –≤—ã–ø–∞–¥–µ–Ω–∏—è FS
            if (isFifthReel) {
                const fsSymbol = config.symbols.find(s => s.symbol === 'FS');
                if (fsSymbol) {
                    totalWeight += fsSymbol.weight * 4; // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –≤–µ—Å FS –≤ 5 —Ä–∞–∑ –¥–ª—è 5-–≥–æ –±–∞—Ä–∞–±–∞–Ω–∞
                }
            }
            
            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ª—É—á–∞–π–Ω–æ–µ —á–∏—Å–ª–æ
            const random = Math.random() * totalWeight;
            
            // –í—ã–±–∏—Ä–∞–µ–º —Å–∏–º–≤–æ–ª
            let currentWeight = 0;
            for (const sym of config.symbols) {
                let weight = sym.weight;
                
                // –ï—Å–ª–∏ —ç—Ç–æ 5-–π –±–∞—Ä–∞–±–∞–Ω –∏ —Å–∏–º–≤–æ–ª FS, –∏—Å–ø–æ–ª—å–∑—É–µ–º —É–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π –≤–µ—Å
                if (isFifthReel && sym.symbol === 'FS') {
                    weight *= 5;
                }
                
                currentWeight += weight;
                if (random <= currentWeight) {
                    return sym.symbol;
                }
            }
            
            // –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –ø–µ—Ä–≤—ã–π —Å–∏–º–≤–æ–ª
            return config.symbols[0].symbol;
        }

        // –ó–∞–ø—É—Å–∫ –±–æ–Ω—É—Å–Ω–æ–≥–æ —Ä–∞—É–Ω–¥–∞
        function startBonusRound() {
            hideBonusModal();
            const price = config.bonusPrices[state.bet];
            
            if (state.credit < price) {
                alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫—Ä–µ–¥–∏—Ç–æ–≤ –¥–ª—è –ø–æ–∫—É–ø–∫–∏ –±–æ–Ω—É—Å–Ω–æ–≥–æ —Ä–∞—É–Ω–¥–∞!');
                return;
            }
            
            state.credit -= price;
            state.isSpinning = true;
            state.bonusTriggered = true;
            updateUI();
            
            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ª—É—á–∞–π–Ω—ã–π —Å–∏–º–≤–æ–ª –¥–ª—è –≤—Å–µ—Ö –±–∞—Ä–∞–±–∞–Ω–æ–≤ (–∫—Ä–æ–º–µ FS)
            const bonusSymbol = getRandomSymbol().symbol === 'FS' ? 'üçí' : getRandomSymbol(); // –ò—Å–∫–ª—é—á–∞–µ–º FS –∏–∑ –±–æ–Ω—É—Å–Ω–æ–≥–æ —Ä–∞—É–Ω–¥–∞
            const finalSymbols = Array(5).fill(bonusSymbol);
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º –±–∞—Ä–∞–±–∞–Ω—ã —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π
            elements.reels.forEach((reel, i) => {
                setTimeout(() => {
                    animateReel(reel, finalSymbols[i], i === elements.reels.length - 1 ? finalizeSpin : null);
                }, i * config.reelDelay);
            });
        }

        // –ó–∞–ø—É—Å–∫ –±–æ–Ω—É—Å–Ω–æ–≥–æ —Ä–∞—É–Ω–¥–∞ –ø–æ—Å–ª–µ –≤—ã–ø–∞–¥–µ–Ω–∏—è FS
        function startBonusRoundFromFS() {
            elements.fsModal.style.display = 'none';
            state.isSpinning = true;
            state.bonusTriggered = true;
            updateUI();
            
            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ª—É—á–∞–π–Ω—ã–π —Å–∏–º–≤–æ–ª –¥–ª—è –≤—Å–µ—Ö –±–∞—Ä–∞–±–∞–Ω–æ–≤ (–∫—Ä–æ–º–µ FS)
            const bonusSymbol = getRandomSymbol().symbol === 'FS' ? 'üçí' : getRandomSymbol(); // –ò—Å–∫–ª—é—á–∞–µ–º FS –∏–∑ –±–æ–Ω—É—Å–Ω–æ–≥–æ —Ä–∞—É–Ω–¥–∞
            const finalSymbols = Array(5).fill(bonusSymbol);
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º –±–∞—Ä–∞–±–∞–Ω—ã —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π
            elements.reels.forEach((reel, i) => {
                setTimeout(() => {
                    animateReel(reel, finalSymbols[i], i === elements.reels.length - 1 ? finalizeSpin : null);
                }, i * config.reelDelay);
            });
        }

        // –ó–∞–ø—É—Å–∫ –≤—Ä–∞—â–µ–Ω–∏—è
        function startSpin() {
            if (state.isSpinning || state.credit < state.bet) return;
            
            clearWins();
            state.credit -= state.bet;
            state.win = 0;
            state.isSpinning = true;
            state.bonusTriggered = false;
            updateUI();
            
            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ñ–∏–Ω–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –±–∞—Ä–∞–±–∞–Ω–∞
            const finalSymbols = elements.reels.map((reel, index) => {
                // –ù–∞ 5-–º –±–∞—Ä–∞–±–∞–Ω–µ —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º —à–∞–Ω—Å –≤—ã–ø–∞–¥–µ–Ω–∏—è FS
                return getRandomSymbol(index === 4);
            });
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º –±–∞—Ä–∞–±–∞–Ω—ã —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π
            elements.reels.forEach((reel, i) => {
                setTimeout(() => {
                    animateReel(reel, finalSymbols[i], i === elements.reels.length - 1 ? finalizeSpin : null);
                }, i * config.reelDelay);
            });
        }

        // –§–∏–Ω–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ—Å–ª–µ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—Å–µ—Ö –±–∞—Ä–∞–±–∞–Ω–æ–≤
        function finalizeSpin() {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –≤—ã–ø–∞–ª –ª–∏ FS –Ω–∞ 5-–º –±–∞—Ä–∞–±–∞–Ω–µ
            const fifthReelSymbol = elements.reels[4].querySelectorAll('.symbol')[1].textContent;
            
            if (fifthReelSymbol === 'FS' && !state.bonusTriggered) {
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ–º
                elements.fsModal.style.display = 'flex';
                return;
            }
            
            // –ï—Å–ª–∏ —ç—Ç–æ –æ–±—ã—á–Ω—ã–π —Å–ø–∏–Ω –∏–ª–∏ –±–æ–Ω—É—Å–Ω—ã–π —Ä–∞—É–Ω–¥, –ø—Ä–æ–≤–µ—Ä—è–µ–º –≤—ã–∏–≥—Ä—ã—à–∏
            checkWins();
            state.isSpinning = false;
            state.bonusTriggered = false;
            updateUI();
        }

        // –ê–Ω–∏–º–∞—Ü–∏—è –±–∞—Ä–∞–±–∞–Ω–∞ - –ø–∞–¥–µ–Ω–∏–µ —Å–∏–º–≤–æ–ª–æ–≤ —Å–≤–µ—Ä—Ö—É
        function animateReel(reel, finalSymbol, callback) {
            const symbols = Array.from(reel.querySelectorAll('.symbol'));
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é
            symbols.forEach(sym => {
                sym.classList.remove('falling');
                sym.style.animation = 'none';
                sym.style.transform = 'translateY(-200px)';
                sym.style.opacity = '0';
                void sym.offsetWidth; // –¢—Ä–∏–≥–≥–µ—Ä reflow
            });
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–æ–≤—ã–µ —Å–∏–º–≤–æ–ª—ã
            symbols.forEach(sym => {
                sym.textContent = finalSymbol;
                sym.classList.toggle('wild', sym.textContent === 'WILD');
                sym.classList.toggle('fs', sym.textContent === 'FS');
            });
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –ø–∞–¥–µ–Ω–∏—è —Å –Ω–µ–±–æ–ª—å—à–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π –º–µ–∂–¥—É —Å–∏–º–≤–æ–ª–∞–º–∏
            symbols.forEach((sym, index) => {
                setTimeout(() => {
                    sym.classList.add('falling');
                }, index * 100);
            });
            
            // –§–∏–∫—Å–∏—Ä—É–µ–º –∫–æ–Ω–µ—á–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏
            setTimeout(() => {
                symbols.forEach(sym => {
                    sym.style.transform = 'translateY(0)';
                    sym.style.opacity = '1';
                    sym.classList.remove('falling');
                });
                
                if (callback) callback();
            }, config.fallDuration + (symbols.length * 100));
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–∏–≥—Ä—ã—à–Ω—ã—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π
        function checkWins() {
            state.winningLines = [];
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—É—é –ª–∏–Ω–∏—é
            const centerLine = elements.reels.map(reel => {
                const symbols = Array.from(reel.querySelectorAll('.symbol'));
                return symbols[1].textContent;
            });
            
            const result = checkLine(centerLine, 2);
            if (result) {
                state.win = result.win;
                state.credit += state.win;
                state.winningLines.push({ line: 2, count: result.count });
                highlightWinningLine(2, result.count);
            }
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–¥–Ω–æ–π –ª–∏–Ω–∏–∏
        function checkLine(symbols, lineIndex) {
            // –ù–∞—Ö–æ–¥–∏–º –±–∞–∑–æ–≤—ã–π —Å–∏–º–≤–æ–ª (–ø–µ—Ä–≤—ã–π –Ω–µ WILD –∏ –Ω–µ FS)
            let baseSymbol = null;
            for (let i = 0; i < symbols.length; i++) {
                if (symbols[i] !== 'WILD' && symbols[i] !== 'FS') {
                    baseSymbol = symbols[i];
                    break;
                }
            }
            if (!baseSymbol) return null;
            
            // –°—á–∏—Ç–∞–µ–º —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
            let matchCount = 0;
            for (let i = 0; i < symbols.length; i++) {
                if (symbols[i] === baseSymbol || symbols[i] === 'WILD') {
                    matchCount++;
                } else {
                    break;
                }
            }
            
            // –ï—Å–ª–∏ –µ—Å—Ç—å –≤—ã–∏–≥—Ä—ã—à–Ω–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è
            if (matchCount >= 3) {
                let winAmount;
                const bet = state.bet;
                
                if (bet === 1) {
                    // –î–ª—è —Å—Ç–∞–≤–∫–∏ 1 —É–º–µ–Ω—å—à–∞–µ–º –≤—ã–ø–ª–∞—Ç—ã –Ω–∞ 1/5
                    winAmount = Math.floor(config.basePaytable[baseSymbol][matchCount - 3] * 0.8);
                } else {
                    // –î–ª—è –¥—Ä—É–≥–∏—Ö —Å—Ç–∞–≤–æ–∫ —É–º–Ω–æ–∂–∞–µ–º –Ω–∞ —Å—Ç–∞–≤–∫—É
                    winAmount = config.basePaytable[baseSymbol][matchCount - 3] * bet;
                }
                
                return { win: winAmount, count: matchCount };
            }
            
            return null;
        }

        // –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –≤—ã–∏–≥—Ä—ã—à–Ω–æ–π –ª–∏–Ω–∏–∏
        function highlightWinningLine(lineIndex, count) {
            for (let i = 0; i < count; i++) {
                const reel = elements.reels[i];
                const symbols = Array.from(reel.querySelectorAll('.symbol'));
                symbols[lineIndex - 1].classList.add('win-line');
            }
        }

        // –û—á–∏—Å—Ç–∫–∞ –ø–æ–¥—Å–≤–µ—Ç–∫–∏
        function clearWins() {
            document.querySelectorAll('.win-line').forEach(el => {
                el.classList.remove('win-line');
            });
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞—Ä–∞–±–∞–Ω–æ–≤
        function initReels() {
            elements.reels.forEach(reel => {
                const symbols = Array.from(reel.querySelectorAll('.symbol'));
                symbols.forEach((sym, i) => {
                    sym.style.transform = `translateY(${i * 100 - 100}px)`;
                    sym.style.opacity = '1';
                });
            });
        }

        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
        init();
    </script>
</body>
</html>